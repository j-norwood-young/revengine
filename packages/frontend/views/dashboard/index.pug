extends ../layout

block content
    .container
        h1 DM Insight Dashboard
        //- .row
        //-     .col-sm-9
        //-         .card.mb-4
        //-             .card-body
        //-                 canvas#beamArticleProgress
        .row
            .col-sm-4
                .card.mb-4
                    .card-body
                        .big-number.mb-4
                            .number= formatNumber(reader_count)
                            .content Total Readers
            .col-sm-4
                .card.mb-4
                    .card-body
                        h2 Labels
                        for label in labels
                            .big-number.mb-4
                                .number= formatNumber(label.length)
                                .content= label.name
            .col-sm-4
                .card.mb-4
                    .card-body
                        h2 Data Sources
                        for datasource in datasources
                            .big-number.mb-4
                                .number= formatNumber(datasource.length)
                                .content= datasource.name
block scripts
    script.
        document.addEventListener("DOMContentLoaded", async (event) => {
            const beam = new Beam();
            let article_progress_data = await beam.get("/dashboard/article_progress")
            console.log(article_progress_data);
            const charts = new Charts();
            charts.drawArticleProgress(article_progress_data.result.article_progress, document.getElementById("beamArticleProgress").getContext("2d"));
            //- beam.drawCharts(beamdata);
        })
                                